<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AI 헬스코치 v0.4 — Mobile Light</title>
  <link rel="stylesheet" href="styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.16.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection@3.6.1/dist/pose-detection.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5/pose.js"></script>
</head>
<body>
  <header>
    <div class="header-wrap">
      <div class="brand"><div class="dot"></div><h1>AI 헬스코치</h1><span class="badge">v0.4</span></div>
      <div class="tabs">
        <button class="tab active" data-tab="home">홈</button>
        <button class="tab" data-tab="coach">코칭</button>
        <button class="tab" data-tab="report">리포트</button>
        <button class="tab" data-tab="profile">프로필</button>
      </div>
    </div>
  </header>
  <main>
    <section id="onboarding" class="card">
      <h2>빠른 설정 (3초)</h2>
      <div class="grid grid-2">
        <label>키(cm)<input type="number" id="height" min="100" max="230" placeholder="170"></label>
        <label>몸무게(kg)<input type="number" id="weight" min="30" max="200" placeholder="70"></label>
        <label>목표
          <select id="goal">
            <option value="cut">감량</option>
            <option value="gain">근비대</option>
            <option value="maintain">유지</option>
          </select>
        </label>
        <label>기간(주)<input type="number" id="weeks" min="4" max="52" value="8"></label>
      </div>
      <div class="row">
        <button id="saveOnboarding" class="primary">저장</button>
        <button id="skipOnboarding" class="ghost">건너뛰기</button>
        <span id="saveStatus" class="status" aria-live="polite">✅ 저장됨!</span>
      </div>
      <p class="tip">언제든 프로필 탭에서 다시 변경할 수 있어요.</p>
    </section>

    <section id="home" class="card">
      <h2>오늘의 추천</h2>
      <div class="row">
        <button id="getPlan" class="primary">AI 프로그램 추천받기</button>
        <button id="goCoach" class="ghost">AI 코칭 시작하기</button>
      </div>
      <div class="routine-cards" id="routineCards"></div>
      <pre id="routineJson" class="hidden"></pre>
    </section>

    <section id="coach" class="card hidden">
      <h2>AI 코칭 세션</h2>
      <div class="video-wrap">
        <video id="video" playsinline></video>
        <canvas id="overlay"></canvas>
        <div id="feedback" class="feedback">Let’s go! 전신이 보이도록 한 걸음 뒤로.</div>
      </div>
      <div class="row">
        <label>운동 선택
          <select id="exercise">
            <option value="squat">스쿼트</option>
            <option value="deadlift">데드리프트</option>
            <option value="bench">벤치프레스</option>
          </select>
        </label>
        <button id="flipCam" class="ghost">카메라 전환</button>
      </div>
      <div class="row">
        <button id="previewBtn" class="ghost">미리보기</button>
        <button id="startBtn" class="primary">시작</button>
        <button id="stopBtn" class="ghost" disabled>중지</button>
        <button id="restBtn" class="ghost" disabled>휴식</button>
      </div>
      <div class="stats">
        <div class="stat">정확도 %<div id="accuracy">-</div></div>
        <div class="stat">반복<div id="reps">0</div></div>
        <div class="stat">세트<div id="sets">1</div></div>
      </div>
      <p class="tip">Tip: 밝은 장소에서 세로 화면이 인식률이 좋아요.</p>
      <div id="restTimer" class="stat hidden">휴식 <span id="restSec">60</span>s</div>
    </section>

    <section id="report" class="card hidden">
      <h2>내 리포트</h2>
      <div class="row">
        <button id="refreshLog" class="ghost">기록 새로고침</button>
        <button id="exportCsv" class="ghost">CSV 내보내기</button>
        <button id="makeReport" class="primary">AI 리포트 생성</button>
        <button id="downloadReport" class="ghost" disabled>리포트 저장(.html)</button>
      </div>
      <pre id="logView"></pre>
      <div id="reportView" class="report"></div>
    </section>

    <section id="profile" class="card hidden">
      <h2>프로필 & 설정</h2>
      <div class="row">
        <button id="reopenOnboarding" class="ghost">온보딩 다시 설정</button>
        <button id="clearData" class="ghost">데이터 초기화</button>
      </div>
      <p class="tip">데이터는 이 기기의 브라우저(localStorage)에만 저장됩니다.</p>
    </section>
  </main>

  <nav class="footer-tabs">
    <button data-tab="home" class="active">홈</button>
    <button data-tab="coach">코칭</button>
    <button data-tab="report">리포트</button>
    <button data-tab="profile">프로필</button>
  </nav>

  <script src="app.js"></script>
</body>
</html>
